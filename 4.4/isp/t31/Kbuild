SRCS := $(DIR)/tx-isp-debug.c \
        $(DIR)/tx-isp-module.c

# Compile the wrapper source file into an object file
wrapper.o: $(DIR)/wrapper.c
	$(CC) -c $< -o $@

# Archive the wrapper object into a static library
libwrapper.a: wrapper.o
	$(AR) rcs $@ $<

# Object files for your original source files
OBJS := $(SRCS:%.c=%.o) $(ASM_SRCS:%.S=%.o)

# List of libraries to link against
OUT_OBJS := libwrapper.a $(KERNEL_VERSION)/sdk/lib$(SOC_FAMILY)-firmware.a

# Combine all objects into a single module
$(OUT)-objs := $(OBJS) $(OUT_OBJS)

# Define the module target
obj-m += $(OUT).o
